{% set exists = storage.has_item(item_name) %}
{% set current_endpoint = request.endpoint %}

{% block views %}

    <ul class="moin-nav nav-tabs moin-shadow">
        {%- for endpoint, label, title, check_exists in cfg.item_views if not endpoint in cfg.endpoints_excluded %}
            {%- if not check_exists or check_exists and exists %}

                {%- if endpoint == 'frontend.show_item' %}
                    <li {% if endpoint == current_endpoint %} class="active"{% endif %}>
                        <a href="{{ url_for(endpoint, item_name=item_name) }}" title="{{ title }}" rel="nofollow">
                        <span class="icon-eye-open"></span>
                            {{ label }}
                        </a>
                    </li>
                {%- endif %}

                {%- if endpoint == 'frontend.modify_item' and user.may.write(item_name) %}
                    <li {% if endpoint == current_endpoint %} class="active"{% endif %}>
                        <a href="{{ url_for(endpoint, item_name=item_name) }}" title="{{ title }}" rel="nofollow">
                         <span class="icon-pencil"></span>   {{ label }}
                        </a>
                    </li>
                {%- endif %}

                {%- if endpoint == 'frontend.history' %}
                    <li {% if endpoint == current_endpoint %} class="active"{% endif %}>
                        <a href="{{ url_for(endpoint, item_name=item_name) }}" title="{{ title }}" rel="nofollow">
                        <span class="icon-time"></span>
                            {{ label }}
                        </a>
                    </li>
                {%- endif %}

                {%- if endpoint == 'frontend.show_item_meta' %}
                    <li {% if endpoint == current_endpoint %} class="active"{% endif %}>
                        <a href="{{ url_for(endpoint, item_name=item_name) }}" title="{{ title }}" rel="nofollow">
                        <span class="icon-wrench"></span>
                            {{ label }}
                        </a>
                    </li>
                {%- endif %}

                {%- if endpoint == 'frontend.highlight_item' %}
                    <li {% if endpoint == current_endpoint %} class="active"{% endif %}>
                        <a href="{{ url_for(endpoint, item_name=item_name) }}" title="{{ title }}" rel="nofollow">
                        <span class="icon-picture"></span>
                            {{ label }}
                        </a>
                    </li>
                {%- endif %}

                {%- if endpoint == 'frontend.backrefs' %}
                    <li {% if endpoint == current_endpoint %} class="active"{% endif %}>
                        <a href="{{ url_for(endpoint, item_name=item_name) }}" title="{{ title }}" rel="nofollow">
                        <span class="icon-share"></span>
                            {{ label }}
                        </a>
                    </li>
                {%- endif %}

                {%- if endpoint == 'special.comments' %}
                    <li class="moin-toggle-comments-button">
                        <a href="#" title="{{ title }}">
                        <span class="icon-comment"></span>
                            {{ label }}
                        </a>
                    </li>
                {%- endif %}

                {% if endpoint == 'special.transclusions' -%}
                    <li class="moin-transclusions-button">
                        <a href="#" title="{{ title }}">
                        <span class="icon-edit"></span>
                            {{ label }}</a>
                    </li>
                {%- endif %}

            {%- endif %}
        {% endfor %}

    </ul>
{% endblock %}
