.. _page title:

=========================
 reStructuredText Markup
=========================

..
 This document is duplicated within the Moin2 repository as
 `docs/user/rest.rst` and `src/moin/help/help-en/rst.data`.

 Please update both.
 Do not include features only supported by Sphinx.

.. contents::
   :depth: 3

This document is an introduction to the `reStructuredText`_ (rST)
markup language. It demonstrates the features of the Moin2 rST support.
For details, follow the links to the `reStructuredText Markup
Specification`_.

There are two HTML version of this document:
one is part of the Wiki Help generated by Moin, the other
belongs to the _`external documentation` generated by Sphinx_.
Some features and links only work in the Wiki Help page.


Section Headings
================

*Section headings* are underlined (or over- and underlined) with a printing
nonalphanumeric 7-bit ASCII character (`details`__).

__ https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#sections

* The underline/overline must be at least as long as the
  title text.

* A blank line after a heading is optional.

* Instead of a fixed order of heading adornment styles,
  the level is determined by their order in the document:

  The first adornment style encountered is registered as page title style
  (<h1> in HTML), the second style is assigned to level 2,
  the third style to level 3, and so on.\ [#fn:document-title]_

* Once established, adornment styles must be consistent.
  Skipping a heading level results in a parsing error.

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

           =======
           Level 1
           =======

     - The first encountered style becomes the `page title`_ (if it is
       unique)\ [#fn:document-title]_.

   * - ::

           Level 2
           =======

     - See the heading of `this section <section headings_>`__.

   * - ::

           Level 3
           -------
           Level 4
           *******
           Level 5
           :::::::
           Level 6
           +++++++


     - See `below`__.

       (Section headings may not be nested in body elements like lists_,
       tables_, or admonitions_.  You may use rubrics_ for informal
       headings outside the main document structure.)

__

Level 3
-------
Level 4
*******
Level 5
:::::::
Level 6
+++++++

.. [#fn:document-title] If any visible content appears before the first
   heading on a page or if the adornment style is used more than once,
   the first heading is set to level 2 and all subsequent headings
   are demoted by one level (details__).

   __ https://docutils.sourceforge.io/docs/api/transforms.html#doctitle


Thematic Breaks
===============

.. _transition example:

A *thematic break* represents a change in subject or emphasis.
It is typically rendered as additional space between paragraphs, often
with a horizontal line, a row of asterisks, or some other ornament.
In HTML, it is represented by the ``<hr />`` element.

--------------------------------------------------------------------------

In reStructuredText, this element is called *transition* and
represented by a horizontal line of 4 or more repeated punctuation
characters (details__).

__ https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html
   #transitions

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

          […] by the ``<hr />`` element.

          ------------------------------

          In reStructuredText, this […]

     - See `above <transition example_>`__.

       (Transitions may not be nested in body elements like lists_,
       tables_, admonitions_, ...).


Text formatting
===============

`Inline markup`_ can be applied to words or phrases within a text block
to format text.

* Less common styles are obtained via `interpreted text roles`_.
* reStructuredText does not support ``***Nested** inline markup*``. [#]_

.. list-table::
   :header-rows: 1

   * - Markup
     - Result
     - Notes

   * - ``*emphasis*``
     -   *emphasis*
     -

   * - ``**strong emphasis**``
     -   **strong emphasis**
     -

   * - ````inline \literal\````
     -   ``inline \literal\``
     - In `literal context`_, `backslashes <backslash escapes_>`__
       have no special meaning.

   * - ```Hamlet```
     -   `Hamlet`
     - `Interpreted text`_. The `default text role`_ is configurable,
       it defaults to the "title" role (see below).

   * - ``:ab:`abbr.```
     -   :ab:`abbr.`
     - Abbreviations, can be styled with custom CSS.

   * - ``:code:`answer = 42```
     -   :code:`answer = 42`
     - For syntax highlight, see `custom text roles`_.

   * - ``:sub:`sub`\ script``
     -   :sub:`sub`\ script
     - Character-level markup …

   * - ``:sup:`super`\ script``
     -   :sup:`super`\ script
     - … requires `escaped spaces <backslash escapes_>`__.

       .. _"title" role:

   * - ``:title:`Moin```
     -   :title:`Moin`
     - The title of a creative work (book, opera, coding project, etc.)
       Analog to HTML <cite>. This is the initial `default text role`_.

.. [#] This is a longstanding Docutils TODO issue.

.. _custom text roles:

*Custom interpreted text roles* can be used to attach CSS class values to
inline text and set the code language for syntax highlight
(`details <"role" directive_>`__).

.. list-table::
   :header-rows: 1

   * - Markup
     - Result
     - Notes

   * - ::

         .. role:: del

       ``:del:`removed` content``

     - .. role:: del

       :del:`removed` content

     - Uses the `\<del>`_ element.

   * - ::

         .. role:: ins

       ``:ins:`editional` additions``

     - .. role:: ins

       :ins:`editional` additions

     - Uses the `\<ins>`_ element.

   * - ::

           .. role:: green

       ``A :green:`dragon`.``

     - .. role:: green

       A :green:`dragon`.

     - Moin pre-defines some `CSS classes`__ for background color.
       Text with other classes can be styled with custom CSS.

       __ `Moin CSS classes`_

   * - ::

           .. role:: blue(emphasis)

       ``The `Norwegian`:blue:.``

     - .. role:: blue(emphasis)

       The `Norwegian`:blue:.

     - Custom roles may be based on standard roles.

   * - ::

           .. role:: em-tt(emphasis)
              :class: monospaced

       ``*emphasis* and :em-tt:`emphasis monospace```

     - .. role:: em-tt(emphasis)
          :class: monospaced

       *emphasis* and :em-tt:`emphasis monospace`

     - Custom roles may be used as surrogate for nested inline markup.

   * - ::

           .. role:: tex(code)
              :language: latex

       ``:tex:`\frac{\pi}{4}```

     - .. role:: tex(code)
          :language: latex

       :tex:`\frac{\pi}{4}`

     - There is highlight support for many languages__.

       See also `code blocks`_.

       __ https://pygments.org/languages/

* The examples rely on `Moin CSS classes`_ missing in the `external
  documentation`_.


* TODO: Support semantic HTML inline markup elements.

  ..
    .. role:: b
    .. role:: dfn
    .. role:: i
    .. role:: kbd
    .. role:: mark
    .. role:: q
    .. role:: s
    .. role:: samp
    .. role:: small
    .. role:: u
    .. role:: var

    :b:    highlight :b:`key words` without marking them up as important
    :dfn:  :dfn:`dfn` represents the defining instance of a term
    :i:    :i:`voix alternative`
    :kbd:  user input like :kbd:`Ctrl X`
    :mark: :mark:`highlight` a run of text
    :q:    represents :q:`phrasing content quoted from another source`
    :s:    text that is no longer accurate, :s:`or no longer relevant`
    :samp: computer output like :samp:`hello world!`
    :small: side comments :small:`like this`
    :u:    unarticulated annotations of, e.g, :u:`mispellings`
    :var:  variables (or constants like :var:`c`)


Hyperlinks
==========

Hyperlinks connect a *hyperlink reference* to a matching *hyperlink target*
(`details <hyperlink reference_>`__).

* Matching of named_ references and targets is done after normalizing
  whitespace and case.
* Anonymous_ references and targets are matched according to their order.
* The target can also be embedded_ in the reference.


Internal Links
--------------

**Page-internal links** point to an anchor (named element or anonymous
target) in the same document.

.. list-table::
   :header-rows: 1

   * - Markup
     - Result
     - Notes

   * - .. _named:

       ``Simple_ reference and _`simple` inline target``.

     - Simple_ reference and _`simple` inline target.

     - See `simple reference names`_ and `inline targets`_.

   * - ``Links to a `named paragraph`_, the `MoinMoin logo`_,
       and a table named `fruit salad`_.``
     - Links to a `named paragraph`_, the `MoinMoin logo`_,
       and a table named `fruit salad`_.
     - Put `phrase references`_ in backticks.

   * - ``It's `easy <simple_>`__.``

     - It's `easy <simple_>`__.

     - Custom link text with `embedded alias`_.

   * - .. _anonymous:

       ``Easy__ as pie.``
       ::

         __ simple_

     - Easy__ as pie.

       __ simple_

     - Custom link text with `anonymous reference`_
       and anonymous `indirect target`_.

   * - ``Section headings_ are implicit targets.``
     - `Section headings`_ are implicit targets.
     - For details, see `implicit targets`_.

   * - ::

         .. _named paragraph:

         This paragraph
         is a target.

     - .. _named paragraph:

       This paragraph
       is a target.

     - `Empty hyperlink targets`_ mark the following element.

.. _Wiki-internal links:

The Moin rST converter interprets named hyperlink references without
matching target as **Wiki-internal links** (whitespace is normalized).

* Caution! `Explicit targets`_, `inline targets`_ and `section headings`_
  with the same name take precedence!
* In Docutils and Sphinx, unknown target names are reported as errors.

========================  ===================  ============================
Markup                    Result               Notes
========================  ===================  ============================
``Home_``                 Home_                item in default namespace

```users/Home`_``         `users/Home`_        item in specified namespace

```../moin`_``            `../moin`_           sibling item in current
                                               namespace

```../moin#Linking`_``    `../moin#Linking`_   fragment of a sibling item

 ```/Subitem Example`_``  `/Subitem Example`_  subitem of the current item
========================  ===================  ============================

Alternatively, Wiki-internal links may be specified via `URI references`_.

* The syntax for Wiki-internal links differs from POSIX *path* syntax!

.. list-table::
   :header-rows: 1

   * - Markup
     - Result
     - Notes

   * - ```<Home>`__``
     - `<Home>`__
     - item in default namespace (as embedded URI reference)

   * - ```My Castle <Home>`__``
     - `My Castle <Home>`__
     - ... with custom text

   * - ```<users/Home>`__``
     - `<users/Home>`__
     - item in specified namespace

   * - ```Moin markup`__``
       ::

          __ ../moin

     - `Moin markup`__

       __ ../moin

     - sibling item (in an `anonymous target`_)

   * - ``|MoinMoin|_ markup``
       ::

            .. _MoinMoin: ../moin

     - |MoinMoin|_ markup

       .. _MoinMoin: ../moin

     - ... as image_ link via `substitution reference`_

       The substitution text becomes the `reference name`_,
       an `explicit target`_ maps it to a URI reference.

   * - ```sub-item </Subitem%20Example>`__``
     - `sub-item </Subitem%20Example>`__
     - subitem (with custom text)

       In `URI context`_, whitespace is removed by default.
       Use an `escaped space <backslash escapes_>`__ or percent encoding.


External Links
--------------

*External* links point to an external resource (specified as URI).

.. list-table::
   :header-rows: 1

   * - Markup
     - Result
     - Notes

   * - ``Moin (https://moinmo.in/) supports rST.``

     - Moin (https://moinmo.in/) supports rST.

     - URIs and email addresses are turned into `standalone hyperlinks`_.

   * - ``Moin_ supports rST.``
       ::

         .. _moin:
             https://moinmo.in/

     - Moin_ supports rST

       .. _moin:
           https://moinmo.in/

     - A named `hyperlink reference`_ and matching `external target`_
       keep the details out of the text flow.

   * - .. _embedded:

       ```Moin <https://moinmo.in/>`__ supports rST.``

     - `Moin <https://moinmo.in/>`__ supports rST.

     - Reference with custom link text and `embedded URI`_.

   * - ```Moin supports rST`__.``
       ::

         __ https://
            moin-20.readthedocs.io/
            en/latest/user/rest.html

     - `Moin supports rST`__.

       __ https://
          moin-20.readthedocs.io/
          en/latest/user/rest.html

     - `Anonymous references`_ and targets are handy for verbose or
       repeated link texts.

   * - ``:RFC:`6921```
     - :RFC:`6921`
     - `"rfc-reference" role`_

   * - ``:PEP:`01```
     - :PEP:`01`
     - `"pep-reference" role`_

.. TODO: interwiki link currently fails:

      * - ```InterWiki page on MeatBall <MeatBall:InterWiki>`__``

        - `InterWiki page on MeatBall <MeatBall:InterWiki>`__

        - InterWiki page on MeatBall. [#]_

   .. [#] Interwiki links work only in Moin and only after configuring.


Blockquotes
===========

An indented text block is interpreted as a *blockquote*,
a text part quoted from another source (details__).

__ https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html
   #block-quotes

* Blockquotes may contain arbitrary body elements.
* To add an attribution_, append a paragraph preceded by
  "``--``" or an em-dash.

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

           preceding paragraph

             It is my business to know
             things. That is my trade.

             -- Sherlock Holmes

           succeeding paragraph

     -     preceding paragraph

             It is my business to know
             things. That is my trade.

             -- Sherlock Holmes

           succeeding paragraph


Lists
=====

* In reStructuredText, all lists must be separated from other body
  elements by blank lines.
* The list marker must **not** be indented.
* List items may contain arbitrary body elements.
* Blank lines between list items are optional.

Unordered Lists
---------------

A text block which begins with a ``*``, ``+``, ``-``, ``•``, ``‣``, or ``⁃``,
followed by whitespace, is a *bullet list* item
(`details <bullet list_>`__).

* List item bodies must be left-aligned and indented relative to the marker.

  * They may start on the same line as the marker or on the next line.
  * The first line of text sets the `indentation level`_ for this item.
  * Sub-items 2.1 to 2.2.2 show some valid input variants.

* See `line blocks`_ for the rST variant of a "bulletless list".

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

           - item 1
           - item 2

             -   item 2.1
             - item 2.2

               - item 2.2.1
               -
                item
                2.2.2

           - item 3

     -
       - item 1
       - item 2

         -   item 2.1
         - item 2.2

           - item 2.2.1
           -
            item
            2.2.2

       - item 3

   * - ::

           Attention!

            * Indented lists
            * are nested
              in a block quote.

     - Attention!

        * Indented lists
        * are nested
          in a block quote.


Ordered Lists
---------------

*Ordered lists* are similar to `unordered lists`_, but use *enumerators*
instead of bullets (`details <enumerated lists_>`_).

* Ordered lists can be automatically enumerated using the ``#`` character.
* The first enumerator determines the *enumeration sequence*, *formatting
  type* [#]_, and *start value*.
* Sub-items 2.1 to 2.2.2 show some valid indentation variants.

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

           #. item 1
           #. item 2

              (a)   item 2.1
              (#) item 2.2

                  i) item
                     2.2.1
                  #)
                   item 2.2.2

           #. item 3

     - #. item 1
       #. item 2

          (a)   item 2.1
          (#) item 2.2

              i) item
                 2.2.1
              #)
               item 2.2.2

       #. item 3


   * - ::

           4) item 4 with

              C. uppercase
              #. letters and

                 IV) custom
                 #) start values

     - 4) item 4 with

          C. uppercase
          #. letters and

             IV) custom
             #) start values

.. [#] HTML output ignores the formatting style and
       always uses a trailing period.


Definition Lists
----------------

*Definition lists* are formed by a *term* on one line followed by an
indented *definition* or *description* on the next line (details__).

__ https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html
   #definition-lists

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

           term
             Description
           term 2 : classifier
             Optional *classifiers*
             may be appended to the term.

     - term
         Description
       term 2 : classifier
         Optional *classifiers*
         may be appended to the term.


Field Lists
-----------

*Field lists* are mappings from field names to field bodies (details__).

__ https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html
   #field-lists

* Field bodies may start on the same line as the field name or on the
  next line.
* Field list syntax is also used for options in directives_ and for
  `bibliographic fields`_.

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

           :Version:      2.0b2
           :Release Date: 2001-08-16
           :Authors: - Joe Doe
              - Erika Mustermann
              - Jan Kowalski

     - :Version:      2.0b2
       :Release Date: 2001-08-16
       :Authors: - Joe Doe
          - Erika Mustermann
          - Jan Kowalski


Option lists
------------

*Option lists* document the options of a command-line program
(`details <option lists_>`_).

* There must be at least **two** spaces between the option(s) and the
  description (which may also start on the next line).

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

           -a      Output all.
           -c arg  Output just arg.
           --long  Output all day long.
           -f FILE, --file=FILE  These
              two options are synonyms.

     -     -a      Output all.
           -c arg  Output just arg.
           --long  Output all day long.
           -f FILE, --file=FILE  These
              two options are synonyms.


Tables
======

There are four ways to specify tables in reStructuredText:

* `Simple tables`_ are easy to create but limited.
* `Grid tables`_ are complete but cumbersome to create.
* `CSV tables`_ format CSV data as table.
* `List tables`_ are easy to type and edit but don't look like tables in
  the rST source.

Markup within the table cells is supported (you can even nest a table in
a table cell).
`Table directives`_ allow customization and adding a title/caption.


Simple Tables
-------------

*Simple tables* use a compact and easy to type table representation
(details__):

- Equals signs (``=``) are used for top and bottom table borders,
  and to separate *header rows* from the table body.

- Each line of text starts a new row, except when there is a blank cell
  in the first column.

__ https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html
   #simple-tables

.. list-table::
   :header-rows: 1

   * - Markup
     - Result
     - Notes

   * - ::

           ==== ==== ====
            ..   A    B
           ==== ==== ====
             1   A1  B1
             2   A2  B2
           ==== ==== ====

     - ==== ==== ====
        ..   A    B
       ==== ==== ====
         1   A1  B1
         2   A2  B2
       ==== ==== ====

     - To start a row without content in the first column, use empty
       comments_ (``..``) or `escaped whitespace <backslash escapes_>`_
       (:literal:`\\ \ `).

   * - ::

           === === ===
           In      Out
           ------- ---
            a   b  a+b
           === === ===
            1   2   3
           === === ===

     - === === ===
       In      Out
       ------- ---
        a   b  a+b
       === === ===
       1   2   3
       === === ===

     - Lines of hyphens or equal signs crossing column boundaries
       indicate *column spans*.

   * - ::

           =====  ================
           row 1  a cell with
                  two *lines*

           row 2  a cell with

                  two *paragraphs*
           -----  ----------------
           row 3  a) list
                  #) item 2
           =====  ================

     - =====  ================
       row 1  a cell with
              two *lines*

       row 2  a cell with

              two *paragraphs*
       -----  ----------------
       row 3  a) list
              #) item 2
       =====  ================

     - Cells of the first column must fit on one input line.
       Other cells may use continuation lines.

       Blank lines or lines of hyphens may be used to visually separate rows.

       .. TODO: separate paragraphs inside a cell

See the "table_" directive for styling options.


Grid Tables
-----------

*Grid tables* are a table representation via grid-like "ASCII art"
(details__).

__ https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html
   #grid-tables

.. list-table::
   :header-rows: 1

   * - Markup
     - Result
     - Notes

   * - ::

           +---+----+----+
           |   | A  | B  |
           +===+====+====+
           | 1 | A1 | B1 |
           +---+----+----+
           | 2 | A2 | B2 |
           +---+----+----+

     - +---+----+----+
       |   | A  | B  |
       +===+====+====+
       | 1 | A1 | B1 |
       +---+----+----+
       | 2 | A2 | B2 |
       +---+----+----+

     -

   * - ::

           +--------------+
           | column span  |
           +===+==========+
           |* A| row span |
           |* B|          |
           +---+          |
           |foo|          |
           +---+----------+

     - +--------------+
       | column span  |
       +===+==========+
       |* A| row span |
       |* B|          |
       +---+          |
       |foo|          |
       +---+----------+

     - Grid tables allow arbitrary body elements in *all*
       cells and both *row* and *column spans*.

See the "table_" directive for styling options.


Table Directives
----------------

*Table directives* use the `"directive" syntax`_ to pair the table content
with a caption and/or options guiding the presentation.


.. _CSV tables:

csv-table
*********

The *csv-table* directive supports `CSV data`__ (details__).

__ https://docutils.sourceforge.io/docs/ref/rst/directives.html#csv-table

.. list-table::
   :header-rows: 1

   * - Markup
     - Result
     - Notes

   * - ::

           .. csv-table::
              :header-rows: 1
              :stub-columns: 1

              , A, B
              1, A1, B1
              2, A2, B2

     - .. csv-table::
          :header-rows: 1
          :stub-columns: 1

          , A, B
          1, A1, B1
          2, A2, B2

     - *Delimiter*, *quote* character, *escape* character, and more can
       be customized with directive options__.

       Cell content is parsed as rST.

TODO: The :url: option to load data from an external source does not work
with the syntax for wiki-internal items.

__ https://docs.python.org/3/library/csv.html
__ https://docutils.sourceforge.io/docs/ref/rst/directives.html
   #csv-table-options


.. _list tables:

list-table
**********

The *list-table* directive creates a table from data in a two-level
bullet list (details__).

__ https://docutils.sourceforge.io/docs/ref/rst/directives.html#list-table


.. list-table::
   :header-rows: 1

   * - Markup
     - Result
     - Notes

   * - ::

           .. list-table::
              :header-rows: 1
              :stub-columns: 1

              * -
                - A
                - B
              * - 1
                - A1
                - B1
              * - 2
                - A2
                - B2

     - .. list-table::
          :header-rows: 1
          :stub-columns: 1

          * -
            - A
            - B
          * - 1
            - A1
            - B1
          * - 2
            - A2
            - B2

     - List-tables are suited for complex cell content.  They are,
       for example, extensively used in the source of this document.



table
*****

Use a *table* directive to attach a table caption, a reference name,
or customization options to `Simple Tables`_ and `Grid Tables`_ (details__).

__ https://docutils.sourceforge.io/docs/ref/rst/directives.html#table

.. list-table::
   :header-rows: 1

   * - Markup
     - Result
     - Notes

   * - ::

          .. table:: Fruits
             :name:
               fruit salad
             :class: yellow
               moin-sortable
               no-borders

             ===== ====== ===
             Fruit Colour  #
             ===== ====== ===
             apple red     5
             plum  purple  3
             kiwi  brown   17
             ===== ====== ===

     - .. table:: Fruits
          :name:
            fruit salad
          :class: yellow
            moin-sortable
            no-borders

          ===== ====== ===
          Fruit Colour  #
          ===== ====== ===
          apple red     5
          plum  purple  3
          kiwi  green   17
          ===== ====== ===

     - The "class" option allows styling with `Moin CSS classes`_
       or custom CSS.
       (This also works with `CSV tables`_ and `list tables`_.)

       The "name" option provides a target for `internal links`_.

Limitations
-----------

In comparison to other markup formats, you may miss some features that
are not supported in reStructuredText:

* There is no syntax for text alignment in cells or columns.
* There is no syntax for table footer rows.
* Attaching colour  to individual rows or cells is not supported.
* Attaching CSS class values to individual rows or cells is not
  universally supported.

Some features of reStructuredText tables are currently not supported by
Moin (TODO):

* The table caption/title is ignored.
* The *align*, *width*, *widths*, and *stub-columns* options are ignored.

..
   .. table::
      :width: 7em
      :widths: 1 4
      :align: right

      ==== ===
       A    B
      ==== ===
       11   c
       21   b
       31   a
      ==== ===

.. Support Docutils "table_style_ classes":
   *align-left*, *align-center*, *align-right*
   *booktabs*, *borderless*,
   *captionbelow*, *colwidths-grid*,
   *numbered*

   "Booktabs" style table, numbered, centre-aligned, width 80%:

  .. table:: I/O values
     :class: numbered booktabs
     :width: 80%
     :align: center

     === === ===
     In      Out
     ------- ---
      a   b  a+b
     === === ===
      1   2   3
     === === ===


Preformatted Text
=================

Within a *preformatted text block*, line breaks are preserved.

* Whitespace (except the minimal common indentation) is preserved in
  in all preformatted blocks except `line blocks`_.
* The font is usually "monospace" (except in `line blocks`_).

* Text is parsed for inline markup in `parsed literal blocks`_
  and `line blocks`_.
* No markup processing is done in `literal blocks`_ and `code blocks`_.


Literal Blocks
--------------

A double-colon (``::``) at the end of a line or on a line of its own
starts a *literal block* (details__).

__ https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html
   #literal-blocks

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

          In a literal block::

            Whitespace   and line
               breaks are preserved.

            *Markup* is `ignored\ `_.

     -    In a literal block::

            Whitespace   and line
               breaks are preserved.

            *Markup* is `ignored\ `_.


Code Blocks
-----------

The `"code" directive`_ starts a *code block*.
Syntax highlight works if the `code language`__ is specified after
the directive marker.

__ https://pygments.org/languages/

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

          .. code:: rst

             .. |registered| replace::
                :sup:`®`
                :ltrim:

     -    .. code:: rst

             .. |registered| replace::
                :sup:`®`
                :ltrim:


Parsed Literal Blocks
---------------------

The `"parsed-literal" directive`_ starts a *parsed* literal block.

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

          .. parsed-literal::

            A *pre*\ formatted   block
            with `text formatting_`.

     -    .. parsed-literal::

            A *pre*\ formatted   block
            with `text formatting`_.


Line Blocks
-----------

A *line block* is a “plain list” of lines and nested line
blocks. It is commonly used for verse and addresses (details__).

__ http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html
   #line-blocks

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

          | Start lines with a vertical bar.
          |     Indented lines
          |     indicate a *nested* line block.
          | Long lines may be
            continued on the next line
            (without vertical bar).
          | In the output, all lines may wrap.

     -    | Start lines with a vertical bar.
          |     Indented lines
          |     indicate a *nested* line block.
          | Long lines may be
            continued on the next line
            (without vertical bar).
          | In the output, all lines may wrap.


.. _directive:

Directives
==========

The *directive* markup syntax provides an extension mechanism for
reStructuredText (`details <"directive" syntax_>`__).

A set of *standard directives* is described in the `reStructuredText
Directives`_ document.  This section introduces a selection.
See also `Table Directives`_ and `Preformatted Text`_.

Applications may add domain-specific directives.
Moin adapts the "contents__" and "include_" directives
and adds the "macro" and "parser" directives.

__ `Table of Contents`_


Admonitions
-----------

*Admonitions* are used to draw the reader's attention to an important
information (details__).

There are nine specific admonition types ("attention_", "caution_",
"danger_", "error_" [#]_, "hint_", "important_", "note_", "tip_", and
"warning_") and one "generic_" admonition.

__ https://docutils.sourceforge.io/docs/ref/rst/directives.html#admonitions

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

          .. attention:: Mind the gap!

     -    .. attention:: Mind the gap!
             :name: attention

   * - ::

          .. caution:: Use
             admonitions sparingly.

     -    .. caution:: Use
             admonitions sparingly.
             :name: caution

   * - ::

          .. danger:: Slippery
                      when wet!

     -    .. danger:: Slippery
                      when wet!
                      :name: danger

   * - ::

          .. error::
             Something went wrong

     -    .. error::
             Something went wrong
             :name: error

   * - ::

          .. hint::
             Think before you speak.

     -    .. hint::
             Think before you speak.
             :name: hint

   * - ::

          .. important::
             Back up your data!

     -    .. important::
             Back up your data!
             :name: important

   * - ::

          .. note::
             :name: note

             The "name" option
             provides a target
             for `internal links`_.

     -    .. note::
             :name: note

             The "name" option
             provides a target
             for `internal links`_.

   * - ::

          .. tip:: Be consistent.

     -    .. tip:: Be consistent.
             :name: tip

   * - ::

          .. warning:: Strong prose
             may provoke
             extreme mental exertion.

     -    .. warning:: Strong prose
             may provoke
             extreme mental exertion.
             :name: warning

   * - ::

          .. admonition:: Custom

             The generic `"admonition"
             directive`_ expects
             a title as argument.

     -    .. admonition:: Custom
             :name: generic

             The generic `"admonition"
             directive`_ expects
             a title as argument.

.. [#] "Error" admonitions are also used to highlight rST syntax errors.


.. _image:

Images
------

Images are inserted with the `"image" directive`_.
For *inline images*, use a `substitution definition`_.

* Moin does not support `length units`_ in the "width" and "height" options.
  Unitless numbers work fine.

.. list-table::
   :header-rows: 1

   * - Markup
     - Result
     - Notes

   * - ::

         .. image:: help-common/logo.svg
            :width: 100
            :height: 150
            :alt: [MoinMoin logo]
            :name: MoinMoin logo
            :target: help-en/Home

     -   .. image:: help-common/logo.svg
            :width: 100
            :height: 150
            :alt: [MoinMoin logo]
            :name: MoinMoin logo
            :target: help-en/Home

     - A block-level image.

       The "name" option provides a target for `internal links`_.

       The "target" option makes the image "clickable".

   * - ``The |MoinMoin| logo as inline image.``
       ::

         .. |MoinMoin| image::
            help-common/logo.svg
            :height: 18

     - The |MoinMoin| logo as inline image.

       .. |MoinMoin| image::
          help-common/logo.svg
          :height: 18


     - The `substitution definition`_ may be referenced more than once
       (cf. `Wiki-Internal Links`_).

   * - ``An external inline image |Python|.``
       ::

         .. |Python| image:: https://
            docs.python.org/3/_static/py.svg
            :height: 18

     - An external inline image |Python|.

       .. |Python| image:: https://
          docs.python.org/3/_static/py.svg
          :height: 18

     - Images from external sources may be blocked by the browser
       for security or privacy reasons.

* Videos are recognized by the file extension.

  .. image:: help-common/video.mp4
     :width: 200
     :alt: [demo video]

  TODO: currently, "width" and "alt" options are ignored by Moin.

* .. image:: help-common/cat.jpg
     :alt: [a cat]
     :width: 80
     :align: right

  A right or left aligned image (using the "align" option) lets the
  following elements float up.

* In Moin, images are not enclosed within a block level element so
  several images declared successively without any positioning will display
  in a horizontal row:

  .. image:: help-common/logo.svg
     :height: 20
     :alt: [MoinMoin logo]
  .. image:: help-common/logo.svg
     :height: 20
     :alt: [MoinMoin logo]
  .. image:: help-common/logo.svg
     :height: 20
     :alt: [MoinMoin logo]

* In the `external documentation`_, most image-URIs do not work
  and the alternate text is shown.


Figures
-------

A *figure* consists of an image, a caption, and an optional legend.
Figures are declared with the `"figure" directive`_.

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

          .. figure:: help-common/logo.svg
             :height: 50
             :alt: [white M in blue circle]

             Moin Logo

             The image URI does not work in
             the `external documentation`_.

     -    .. figure:: help-common/logo.svg
             :height: 50
             :alt: [white M in blue circle]

             Moin Logo

             The image URI does not work in
             the `external documentation`_.


.. _include:

Inclusions
----------

The `"include" directive`_ is adapted by Moin to include Wiki items.

* No directive options are supported in Moin.
* The special syntax for `standard definition files`_ works.

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

          .. include:: help-common/audio.mp3

     - Not shown, because it prevents compilation of the `external
       documentation`_.

   * - ::

          .. include:: <html-roles.txt>

     - The roles defined in the included file can be used in
       the document.

.. _rubrics:

Rubrics, Sidebars, and Topics
-----------------------------

The `"rubric" directive`_ creates an informal heading.
Sidebars_ and topics_ are used for content that is only
tangentially related to the main subject.


.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

         .. rubric:: Why "Rubric"?

         A *rubric* was traditionally
         a text part written in red.

     -   .. rubric:: Why "Rubric"?

         A *rubric* was traditionally
         a text part written in red.

   * - ::

         .. sidebar:: Floating Sidebars
            :class: float-right

            Use `Moin CSS classes`_ to let the
            sidebar float to the right or left.

         .. topic:: Topics and Blockquotes

            A *topic* is like a blockquote
            with a title, or a self-contained
            section with no subsections.

     - See below__.

       (*Topics* and *sidebars* may not be nested in body elements
       like lists, tables, admonitions, ...)

__

.. sidebar:: Floating Sidebars
   :class: float-right width-50

   Use `Moin CSS classes`_ to let the
   sidebar float to the right or left.

.. topic:: Topics and Blockquotes

   A *topic* is like a blockquote
   with a title, or a self-contained
   section with no subsections.


Table of Contents
-----------------

The `"contents" directive`_ generates a table of contents.

+------------------+-----------------------+
| Markup           | Result                |
+==================+=======================+
| ::               | See the ToC at the    |
|                  | `top <page title_>`_. |
|   .. contents::  |                       |
|      :depth: 3   |                       |
|                  |                       |
|                  |                       |
+------------------+-----------------------+


Comments
========

A *comment* is a text block that starts with ":literal:`.. \ `"
and ends with the first non-indented line (details__).

__ https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html
   #comments

* An "empty comment" followed by a blank line does not consume any
  indented text. It serves to terminate a preceding construct.

* In Moin, comments may be made visible/invisible by
  clicking the "Comments" link in the "Item Views" menu/toolbar.

* Tip: to prevent mix-up with other "`explicit markup blocks`_",
  start the text on the line below the ":literal:`.. \ `".

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ::

         .. This is a comment.
         .. [This] is a citation_.
         ..
            [This] is a comment.
         ..

            [This] is a blockquote.

     -   .. This is a comment.
         .. [This] is a citation_.
         ..
            [This] is a comment.
         ..

            [This] is a blockquote.




Backslash Escapes
=================

A backslash escapes the following character (`details <escaping_>`__).

.. list-table::
   :header-rows: 1

   * - Markup
     - Result
     - Notes

   * - ``*hot* \*dogs*``

       ``C:\\WINDOWS``

     - *hot* \*dogs*

       C:\\WINDOWS

     - The escaped character represents itself.

   * - ``H\ :sub:`2`\ O``
     - H\ :sub:`2`\ O
     - Escaped *whitespace* is removed, ...

   * - ```</Subitem\ Exam ple>`__``
     -  `</Subitem\ Exam ple>`__
     - ... except in `URI context`_
       (where whitespace is removed by default).


Error Handling
==============

Problems with a `severity level`_ above the `report level`_ generate
system messages.

.. list-table::
   :header-rows: 1

   * - Markup
     - Result

   * - ``Unbalanced *inline markup triggers a warning.``
     - Unbalanced *inline markup triggers a warning.

.. References:

.. _Sphinx: https://www.sphinx-doc.org
.. _reStructuredText:
    https://docutils.sourceforge.io/FAQ.html#restructuredtext

.. _reStructuredText Markup Specification:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html
.. _anonymous references:
.. _anonymous reference:
.. _anonymous target:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#anonymous-hyperlinks
.. _attribution:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#attribution
.. _bibliographic fields:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#bibliographic-fields
.. _bullet list:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#bullet-lists
.. _citation:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#citations
.. _"directive" syntax:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#directives
.. _embedded URI:
.. _embedded alias:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#embedded-uris-and-aliases
.. _empty hyperlink targets:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#internal-hyperlink-targets
.. _enumerated lists:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#enumerated-lists
.. _escaping:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#escaping-mechanism
.. _explicit markup blocks:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#explicit-markup-blocks
.. _explicit target:
.. _explicit targets:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#hyperlink-targets
.. _external target:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#external-hyperlink-targets
.. _hyperlink reference:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#hyperlink-references
.. _hyperlink target:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#hyperlink-targets
.. _implicit targets:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#implicit-hyperlink-targets
.. _indentation level:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#indentation
.. _indirect target:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#indirect-hyperlink-targets
.. _inline markup:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#inline-markup
.. _inline markup recognition rules:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#inline-markup-recognition-rules
.. _inline targets:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#inline-internal-targets
.. _interpreted text:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#interpreted-text
.. _literal context:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#literal-context
.. _option lists:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#option-lists
.. _phrase references:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#phrase-references
.. _reference name:
.. _reference names:
.. _named element:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#reference-names
.. _simple reference names:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#simple-reference-names
.. _standalone hyperlinks:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#standalone-hyperlinks
.. _substitution definition:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#substitution-definitions
.. _substitution reference:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#substitution-references
.. _length units:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#length-units
.. _uri context:
    https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#uri-context

.. _reStructuredText Directives:
    https://docutils.sourceforge.io/docs/ref/rst/directives.html
.. _"admonition" directive:
    https://docutils.sourceforge.io/docs/ref/rst/directives.html#generic-admonition
.. _"code" directive:
    https://docutils.sourceforge.io/docs/ref/rst/directives.html#code
.. _"contents" directive:
    https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents
.. _default text role:
    https://docutils.sourceforge.io/docs/ref/rst/directives.html#default-role
.. _"figure" directive:
    https://docutils.sourceforge.io/docs/ref/rst/directives.html#figure
.. _"image" directive:
    https://docutils.sourceforge.io/docs/ref/rst/directives.html#image
.. _"include" directive:
    https://docutils.sourceforge.io/docs/ref/rst/directives.html#include
.. _"parsed-literal" directive:
    https://docutils.sourceforge.io/docs/ref/rst/directives.html#parsed-literal
.. _"role" directive:
    https://docutils.sourceforge.io/docs/ref/rst/directives.html#role
.. _"rubric" directive:
    https://docutils.sourceforge.io/docs/ref/rst/directives.html#rubric
.. _sidebars:
    https://docutils.sourceforge.io/docs/ref/rst/directives.html#sidebar
.. _topics:
    https://docutils.sourceforge.io/docs/ref/rst/directives.html#topic

.. _interpreted text roles:
    https://docutils.sourceforge.io/docs/ref/rst/roles.html
.. _"pep-reference" role:
    https://docutils.sourceforge.io/docs/ref/rst/roles.html#pep-reference
.. _"rfc-reference" role:
    https://docutils.sourceforge.io/docs/ref/rst/roles.html#rfc-reference

.. _standard definition files:
    https://docutils.sourceforge.io/docs/ref/rst/definitions.html
.. _severity level:
    https://docutils.sourceforge.io/docs/peps/pep-0258.html#error-handling
.. _report level:
    https://docutils.sourceforge.io/docs/user/config.html#report-level

.. _URI references: https://en.wikipedia.org/wiki/Uniform_Resource_Identifier#URI_references

.. _\<del>: https://html.spec.whatwg.org/multipage/edits.html#the-del-element
.. _\<ins>: https://html.spec.whatwg.org/multipage/edits.html#the-ins-element

.. _Moin CSS classes:
    https://moin-20.readthedocs.io/en/latest/user/moinwiki.html
    #css-classes-for-use-with-the-wiki-parser-tables-comments-and-links
